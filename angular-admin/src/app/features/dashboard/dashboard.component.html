<div class="dashboard-container">
  <h1 class="page-title">Tableau de Bord</h1>

  <div *ngIf="loading" class="loading-container">
    <mat-spinner></mat-spinner>
  </div>

  <div *ngIf="error" class="error-container">
    <mat-icon>error</mat-icon>
    <p>{{ error }}</p>
    <button mat-raised-button color="primary" (click)="loadKpis()">Réessayer</button>
  </div>

  <div *ngIf="!loading && !error" class="kpi-grid">
    <mat-card *ngFor="let kpi of kpiCards" class="kpi-card">
      <div class="kpi-content">
        <div class="kpi-info">
          <h3 class="kpi-title">{{ kpi.title }}</h3>
          <p class="kpi-value">{{ kpi.value }}</p>
        </div>
        <div class="kpi-icon" [style.background-color]="kpi.color">
          <mat-icon>{{ kpi.icon }}</mat-icon>
        </div>
      </div>
    </mat-card>
  </div>

  <div *ngIf="!loading && !error && kpis" class="additional-stats">
    <mat-card class="stats-card">
      <mat-card-header>
        <mat-card-title>Statistiques de Livraison</mat-card-title>
      </mat-card-header>
      <mat-card-content>
        <div class="stat-row">
          <span class="stat-label">Prêtes à expédier:</span>
          <span class="stat-value">{{ kpis.orders_ready_to_ship }}</span>
        </div>
        <div class="stat-row">
          <span class="stat-label">En cours de livraison:</span>
          <span class="stat-value">{{ kpis.deliveries_in_progress }}</span>
        </div>
        <div class="stat-row">
          <span class="stat-label">Livrées avec succès:</span>
          <span class="stat-value success">{{ kpis.deliveries_successful }}</span>
        </div>
        <div class="stat-row">
          <span class="stat-label">Échecs de livraison:</span>
          <span class="stat-value error">{{ kpis.deliveries_failed }}</span>
        </div>
      </mat-card-content>
    </mat-card>
  </div>
</div>
